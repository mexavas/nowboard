<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나우보드 로그인</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-storage-compat.js"></script>

    <!-- Firebase UI -->
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="/style/global.css">
    <link rel="stylesheet" href="/style/login-with-google-btn.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
          <a class="navbar-brand" href="index.html">Nowboard</a>
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active text-primary" aria-current="page" href="/poster/upload.html">최신 포스터</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-primary" href="/poster/display.html">포스터를 올리세요</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://www.canva.com/create/posters/">canva로 포스터를 디자인하세요</a>
              </li>
            </ul>
         </div>
           <button type="button" class="login-with-google-btn" id="login-with-google-btn" onclick="signInWithGoogle()">
            Google로 로그인하세요
            </button>   
          
        </div>
      </nav>
            
               

    <!-- Initialize Firebase -->
    <script src="firebase.js"></script>
    <script>
        firebase.initializeApp(firebaseConfig);

        // FirebaseUI config.
        var uiConfig = {
            signInSuccessUrl: 'http://127.0.0.1:5500/user/profile.html',
            signInOptions: [
                // Leave the lines as is for the providers you want to offer your users.
                firebase.auth.GoogleAuthProvider.PROVIDER_ID
            ],
            // tosUrl and privacyPolicyUrl accept either url string or a callback
            // function.
            // Terms of service url/callback.
            tosUrl: 'http://127.0.0.1:5500/user/profile.html',
            // Privacy policy url/callback.
            privacyPolicyUrl: function () {
                window.location.assign('http://127.0.0.1:5500/user/profile.html');
            }
        };
        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.
        ui.start('#firebaseui-auth-container', uiConfig);
        document.getElementById('loader').style.display = 'none';

        function signInWithGoogle() {
            var provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    // Handle signed-in user.
                    console.log(result.user);
                    window.location.href = 'http://127.0.0.1:5500/user/profile.html';
                })
                .catch((error) => {
                    // Handle error.
                    console.log(error);
                });
        }
    </script>
</body>
</html>
