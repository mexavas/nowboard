
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포스터 페이지</title>
    <link rel="stylesheet" href="./css/global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Add your styles here */
    </style>
</head>

<body>
    <div class="myNavbar">
        <a href="./index.html" class="poster-link">인기포스터</a>
        <a href="./user/login.html" id="sign-in-link">로그인하세요</a>
    </div>
    <section id="posterSection">
        <!-- 포스터들이 여기서 출역한다-->
    </section>

    <footer id="footer">
        &copy; 2023 백석대학교 <a href="#" id="logout"></a>
    </footer>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
    <script src="./javascript/firebase.js"></script>
    <script src="./javascript/navbar.js"></script>
    <script>

        // Function to fetch posters from Firestore and display in UI
        function fetchAndDisplayPosters() {
            const db = firebase.firestore();
            const posterSection = document.getElementById('posterSection');

            // Clear existing posters
           // posterSection.innerHTML = "";

            // Get the posters collection
            db.collection('posters').get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const posterData = doc.data();

                
                
                    // Create HTML elements for each poster
                    const posterContainer = document.createElement('div');
                    posterContainer.classList.add('poster-container');

                    const tittleContainer = document.createElement('div');
                    tittleContainer.classList.add('title-container');

                    const posterImage = document.createElement('img');
                    posterImage.classList.add('poster-image');
                    posterImage.src = posterData.posterURL;
                    posterImage.alt = "Poster Image";

                    const buttonContainer = document.createElement('div');
                    buttonContainer.classList.add('button-container');

                    // Append elements to the titleContainer
                    const userInfo = document.createElement('a');
                    userInfo.classList.add('user-info');
                    userInfo.innerHTML = posterData.title;
                    tittleContainer.appendChild(userInfo);
                    

                    // Append elements to the container
                    buttonContainer.appendChild(createButton('like', 'fas fa-thumbs-up like-icon', posterData.likes));
                    buttonContainer.appendChild(createButton('comment', 'fas fa-comment comment-icon', posterData.comments));
                    buttonContainer.appendChild(createButton('share', 'fas fa-share share-icon'));

                    posterContainer.appendChild(tittleContainer);
                    posterContainer.appendChild(posterImage);
                    posterContainer.appendChild(buttonContainer);
                   

                    // Append the container to the posterSection
    
                    posterSection.appendChild(posterContainer);
                    

                });
            });
        }

        
        // Helper function to create button elements
        function createButton(type, iconClass, count) {
            const button = document.createElement('a');
            button.classList.add(`${type}-button`);
            button.href = "#";
            button.innerHTML = `<i class="${iconClass}"></i><span class="like-comment-count lightText">${count || 0}</span>`;
            return button;
        }

        // Fetch and display posters when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndDisplayPosters();
        });
    </script>
</body>

</html>